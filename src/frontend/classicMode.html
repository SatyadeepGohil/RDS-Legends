<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPS-Prediction-ai: Classic Mode</title>
    <link rel="preload" href="../../dist/lib/esm/vanilla.js" as="script" crossorigin>
    <link rel="preload" href="../../dist/store/GameStore.js" as="script" crossorigin>
    <link rel="preload" href="../../dist/classicMode.js" as="script" crossorigin>
    <link rel="preload" href="../../dist/GameEngine.js" as="script" crossorigin>
    <link rel="preload" href="../scss/index.css" as="style">
    <link rel="stylesheet" href="../scss/index.css">
</head>
<body>
    <div id="classic_mode_container">
        <nav id="classic_mode_nav">
            <button><a href="index.html">Back to main menu</a></button>
            <button id="difficulty_mode_btn">Difficulty Mode</button>
            <button id="round_btn">Round</button>
        </nav>
        <div id="status_container">
            <p id="round_counter">Current Round: 0</p>
            <p>Current Score</p>
            <div id="score_container">
                <span id="user_score">User: 0</span>
                <span id="tie_count">Tie: 0</span>
                <span id="opponent_score">Opponent: 0</span>
            </div>
        </div>
        <div id="overlay"></div>
        <div id="winner_modal">
            <p id="winner_text">Winner</p>
            <div id="winner_modal_btn_container">
                <button id="play_again_btn">Play Again</button>
            </div>
        </div>
        <div id="opponent_card_container">
            <div id='flipper'>
                <div id="front"></div>
                <div id="back">Select a Move</div>
            </div>
        </div>
        <hr />
        <div id="selection_card_container">
            <div class="card" data-attack="rock">Rock</div>    
            <div class="card" data-attack="paper">Paper</div>
            <div class="card" data-attack="scissors">Scissors</div>    
        </div>
    </div>
    <script type="module" src="../../dist/classicMode.js"></script>
    <script type="module">
        function activeWorker() {
        let t1 = performance.now();
            const worker = new Worker("../../dist/logic/worker.js", { type: "module" });
            // main
            worker.postMessage({ action: "fetch_patterns" });
    
            worker.onmessage = (e) => {
                let t2 = performance.now();
                console.info('Worker responded in',(t2 - t1).toFixed(2) + 'ms');
                console.log("Main received:", e.data.patterns);
            };
            
            worker.onerror = (err) => {
                console.error("Worker failed to start:", err);
            };
        }

        document.addEventListener('DOMContentLoaded', activeWorker);
    </script>

</body>
</html>